{% load static %}
<header class="navbar">
    <div class="container">
        <a class="navbar-brand" href="{% url 'store:index' %}">Beat Store</a>
        <form class="search-form mx-auto" action="{% url 'store:music_list' %}" method="get">
            <div class="input-group">
                <input class="search-input form-control" type="search" name="search" placeholder="Поиск песен или исполнителей" aria-label="Поиск">
                <button class="btn btn-outline-light search-btn" type="submit" aria-label="Поиск">
                    <i class="bi bi-search"></i>
                </button>
            </div>
        </form>
        <div class="auth-section">
            {% if user.is_authenticated %}
                <a href="{% url 'store:profile' user.username %}" class="nav-link username">{{ user.username }}</a>
            {% else %}
                <a href="{% url 'store:login' %}" class="auth-btn">Вход</a>
            {% endif %}
        </div>
        <button class="navbar-toggler ms-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Переключить навигацию">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Beat Store</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Закрыть"></button>
            </div>
            <div class="offcanvas-body">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'store:index' %}">Главная</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'store:music_list' %}">Музыка</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'store:authors_list' %}">Авторы</a>
                    </li>
                    {% if user.is_authenticated %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'store:profile' user.username %}">Профиль</a>
                        </li>
                        <!-- <li class="nav-item">
                            <a class="nav-link" href="{% url 'store:playlist' %}">Плейлист</a>
                        </li> -->
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'store:cart' %}">Корзина</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'store:upload_song' %}">Добавить музыку</a>
                        </li>
                        <li class="nav-item">
                            <form action="{% url 'store:logout' %}" method="post" style="display: inline;">
                                {% csrf_token %}
                                <button type="submit" class="nav-link btn btn-link">Выйти</button>
                            </form>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link auth-btn" href="{% url 'store:login' %}">Вход</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link auth-btn" href="{% url 'store:register' %}">Регистрация</a>
                        </li>
                    {% endif %}
                </ul>
                <form class="search-form mt-3" action="{% url 'store:music_list' %}" method="get">
                    <div class="input-group">
                        <input class="search-input form-control" type="search" name="search" placeholder="Поиск песен или исполнителей" aria-label="Поиск">
                        <button class="btn btn-outline-light search-btn" type="submit" aria-label="Поиск">
                            <i class="bi bi-search"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</header>